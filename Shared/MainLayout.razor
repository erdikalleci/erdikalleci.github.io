@inherits LayoutComponentBase
@inject IJSRuntime JSRuntime
@inject NavigationManager NavigationManager
@using Microsoft.JSInterop

@* <div class="page">
    <div class="sidebar">
        <NavMenu />
    </div>

    <main>
        <div class="top-row px-4">
            <a href="https://docs.microsoft.com/aspnet/" target="_blank">About</a>
        </div>

        <article class="content px-4">
            @Body
        </article>
    </main>
</div>
 *@

<!--==========================
     Header
   ============================-->
<header id="header">
    <div class="container-fluid">

        <div id="logo" class="pull-left">
            <h1>
                <img src="erdikalleci-logo-50x50.png" style="height:50px;" alt="logo" />
                <a href="#intro" class="scrollto">
                    Erdi Kalleci
                </a>
            </h1>
        </div>

        <nav id="nav-menu-container">
            <ul class="nav-menu">
                <li class="menu-active"><a href="#intro">Anasayfa</a></li>
                <li><a href="#about">Hakkımda</a></li>
                <!--
                <li><a href="#services">Service?</a></li> -->
                <li><a href="#portfolio">Projelerim</a></li>
                <li><a href="#blog">Blog</a></li>
                <!-- <li><a href="#team">Team?</a></li> -->
                @*
                <li class="menu-has-children"><a href="">Drop Down</a>
                <ul>
                <li><a href="#">Drop Down 1</a></li>
                <li><a href="#">Drop Down 3</a></li>
                <li><a href="#">Drop Down 4</a></li>
                <li><a href="#">Drop Down 5</a></li>
                </ul>
                </li> *@

                <li><a href="#contact">İletişim</a></li>
                <li><a href="#" data-toggle="modal" data-target="#araModal"><i class="fa fa-search"></i> Ara</a></li>
            </ul>
        </nav>
        <!-- #nav-menu-container -->
    </div>
</header>
<!-- #header -->
@Body

<!--==========================
     Footer
   ============================-->
<footer id="footer">
    <div class="footer-top">
        <div class="container">
            <div class="row">

                <div class="col-lg-4 col-md-4 footer-info">
                    <h3>
                        Erdi Kalleci
                    </h3>

                    <p>Zamanımın göstereceği gibi o beynim sadece ölümlü olmaktan daha fazlasıdır. / Ada Lovelace</p>

                </div>

                <div class="col-lg-4 col-md-4 footer-links">
                    <h4>Kullanışlı Linkler</h4>
                    <ul>

                        <li>
                            <i class="ion-ios-arrow-right"></i>
                            <a href="https://thingiverse.com" target="_blank">
                                Thingiverse - 3D printer için Arşiv
                            </a>
                        </li>

                        <li>
                            <i class="ion-ios-arrow-right"></i>
                            <a href="https://draw.io" target="_blank">
                                Trello - proje yönetimi ve takip için
                            </a>
                        </li>

                        <li>
                            <i class="ion-ios-arrow-right"></i>
                            <a href="https://draw.io" target="_blank">
                                Draw.io - Çeşitli şemalar için online araç
                            </a>
                        </li>

                    </ul>
                </div>

                <div class="col-lg-4 col-md-4 footer-contact">
                    <h4>Adreslerim</h4>
                    <p>
                        İlgili çalışma kaynak kod ve dosyalarıma site linklerimden ulaşabilirsiniz.
                    </p>

                    <div class="social-links text-center">
                        <a href="https://github.com/erdikalleci" class="github" target="_blank"><i class="fa fa-github"></i></a>
                        <a href="https://www.linkedin.com/in/erdikalleci" class="linkedin" target="_blank"><i class="fa fa-linkedin"></i></a>
                        <a href="https://twitter.com/ErdiKalleci" class="twitter" target="_blank"><i class="fa fa-twitter"></i></a>
                        <a href="https://facebook.com/kallecierdi" class="facebook" target="_blank"><i class="fa fa-facebook"></i></a>
                    </div>

                </div>

            </div>
        </div>
    </div>

    <div class="container">
        <div class="copyright">
            <p>&copy; 2019&nbsp;<strong>Erdi Kalleci.</strong></p>
        </div>
    </div>
</footer>
<!-- #footer -->

<a href="javascript:void(0)" class="back-to-top" @onclick="ScrollToTop"><i class="fa fa-chevron-up"></i></a>

@code {
    private async Task ScrollToTop()
    {
        await JSRuntime.InvokeVoidAsync("ScrollTop");
    }

    protected override void OnInitialized()
    {
        NavigationManager.LocationChanged += OnLocationChanged;
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await ScrollToFragment();
    }

    public void Dispose()
    {
        NavigationManager.LocationChanged -= OnLocationChanged;
    }

    private async void OnLocationChanged(object sender, LocationChangedEventArgs e)
    {
        await ScrollToFragment();
    }

    private async Task ScrollToFragment()
    {
        var uri = new Uri(NavigationManager.Uri, UriKind.Absolute);
        var fragment = uri.Fragment;
        if (fragment.StartsWith('#'))
        {
            // Handle text fragment (https://example.org/#test:~:text=foo)
            // https://github.com/WICG/scroll-to-text-fragment/
            var elementId = fragment.Substring(1);
            var index = elementId.IndexOf(":~:", StringComparison.Ordinal);
            if (index > 0)
            {
                elementId = elementId.Substring(0, index);
            }

            if (!string.IsNullOrEmpty(elementId))
            {
                await JSRuntime.InvokeVoidAsync("BlazorScrollToId", elementId);
            }
        }
    }
}